<% provide(:title, 'Todos los Usuarios') %>

<div class="boton_der">
	<% if current_user.admin? %>
		<div class="top_buttons">
			<%= link_to new_user_path do %>
				<p><button type="button" class="btn btn-default">Nuevo Usuario</button></p>
			<% end %>
		</div>
	<% end %>
	<h1>Todos los Usuarios<span class="line"></span></h1>
</div>
<div class="all_width blue_box">
	<table class="table table-striped tablesorter">
		<thead>
			<tr>
				<th>Usuario</th>
				<th>Email</th>
				<th>Administrador</th>
				<th>Instructor</th>
				<th>Coordinador</th>
				<% if current_user.admin? %>
					<th>Editar</th>
					<th>Eliminar</th>
				<% end %>
			</tr>
		</thead>
		<tbody>
			<% @users.each do |user| %>
			<tr>
				<td><%= link_to user.name, user %></td>
				<td><%= user.email %></td>
				<% if user.admin %><td>Sí</td><% else %><td>No</td><% end %>
				<% if user.instructor %><td>Sí</td><% else %><td>No</td><% end %>
				<% if user.coordinator %><td>Sí</td><% else %><td>No</td><% end %>
				<% if current_user.admin? %>
					<th>
						<%= link_to edit_user_path(user) do %>
							<button type="button" class="btn btn-default btn-xs">Editar</button>
						<% end %>
					</th>
					<% if !current_user?(user) %>
						<th>
							<%= link_to user, method: :delete, data: { confirm: "¿Estás seguro de borrar a #{user.name}?" } do %>
								<button type="button" class="btn btn-danger btn-xs">Borrar</button>
							<% end %>
						</th>
					<% else %>
						<th>
							<button type="button" class="btn btn-danger btn-xs disabled">Borrar</button>
						</th>
					<% end %>
				<% end %>
			</tr>
			<% end %>
		</tbody>
	</table>
</div>