<% provide(:title, "Nuevo Curso") %>

<div class="boton_der">
	<div class="top_buttons">
		<%= link_factory( :_path => groups_path, :_text => "Regresar a los programas", _class: 'btn btn-info', _button: true ) %>
	</div>
	<h1>Nuevo Curso<span class="line"></span></h1>
</div>

<div id="loader">
	<img src="/assets/calendar_loader.GIF" alt="">
	CREANDO CURSO
</div>
<div class="spacer"></div>
<div class="row" id="course_container">
	<div class="col-md-4 col-md-offset-4">
	  	<%= simple_form_for @course, :html => {:multipart => true, :class => 'form-horizontal'} do |f| %>
	  		<%= render 'shared/error_messages', object: f.object %>
	  		<p><%= f.input :name, label:"Nombre del Grupo" %></p>
	  		<p><%= f.input :user_id, label:"Instructor", include_blank: true, collection: User.instructors.map { |p| [ p.name, p.id ] } %></p>
	  		<p><%= f.input :assistant_id, label:"Asistente", include_blank: true, collection: User.instructors.map { |p| [ p.name, p.id ] } %></p>
			<div id="selector_fecha">
				<div class="input date required course_init_date">
					<label class="date required" for="course_init_date_3i">
						<abbr title="required">*</abbr>
					Inicio de curso
					</label>
					<select aria-required="true" class="date required form-control date_selector" id="course_init_date_3i" name="course[init_date(3i)]" required="required">
						<option value=""></option>
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
						<option value="9">9</option>
						<option value="10">10</option>
						<option value="11">11</option>
						<option value="12">12</option>
						<option value="13">13</option>
						<option value="14">14</option>
						<option value="15">15</option>
						<option value="16">16</option>
						<option value="17">17</option>
						<option value="18">18</option>
						<option value="19">19</option>
						<option value="20">20</option>
						<option value="21">21</option>
						<option value="22">22</option>
						<option value="23">23</option>
						<option value="24">24</option>
						<option value="25">25</option>
						<option value="26">26</option>
						<option value="27">27</option>
						<option value="28">28</option>
						<option value="29">29</option>
						<option value="30">30</option>
						<option value="31">31</option>
					</select>
					<select aria-required="true" class="date required form-control date_selector" id="course_init_date_2i" name="course[init_date(2i)]" required="required">
						<option value=""></option>
						<option value="1">Enero</option>
						<option value="2">Febrero</option>
						<option value="3">Marzo</option>
						<option value="4">Abril</option>
						<option value="5">Mayo</option>
						<option value="6">Junio</option>
						<option value="7">Julio</option>
						<option value="8">Agosto</option>
						<option value="9">Septiembre</option>
						<option value="10">Octubre</option>
						<option value="11">Noviembre</option>
						<option value="12">Diciembre</option>
					</select>
					<select aria-required="true" class="date required form-control date_selector" id="course_init_date_1i" name="course[init_date(1i)]" required="required">
						<option value=""></option>
						<option value="2014">2014</option>
						<option value="2015">2015</option>
						<option value="2016">2016</option>
						<option value="2017">2017</option>
						<option value="2018">2018</option>
						<option value="2019">2019</option>
					</select>
				</div>
			</div>
			<p><%= f.number_field :program_id, value: @program.id, :readonly => true, :class => 'disabled form-control', :type=>"hidden" %></p>
			<p><%= f.input :cost, as: :integer,  label:"Costo" %></p>
			<p><%= f.input :location, label:"Ubicación" %></p>
			<div class="spacer"></div>
			<div class="col-md-12 time_selector">
				<div class="col-md-5"><%= f.label "days", 'Días de clases' %></div>
				<div class="col-md-7 text_center"><%= f.label "days", 'Horas de clase' %></div>
			</div>
			<div class="spacer"></div>
			<% dias = ['Lunes','Martes','Miércoles','Jueves','Viernes'] %>
			<% days_symbols = [:monday, :tuesday, :wednesday, :thursday, :friday] %>
			<% hours = [ :monday_hour, :tuesday_hour, :wednesday_hour, :thursday_hour, :friday_hour ] %>
			<% dias.each_with_index do |day,index| %>
				<div class="col-md-12 time_selector">
					<div class="col-md-5">
						<%= f.check_box days_symbols[index], {}, true, false %>
						<%= f.label days_symbols[index], dias[index] %>
					</div>
					<div class="col-md-7">
						<%= f.input hours[index], as: :time, include_blank: true, :minute_step => 30, :time_separator => "", :start_hour => 7, :end_hour => 21, :input_html=> {:class=>'time_select
							'} %>
					</div>
				</div>
			<% end %>
			<br>
			<p><%= f.submit "Guardar", class: "btn btn-sm btn-primary" %></p>
		<% end %>
	</div>
</div>

<script>
	$(document).ready(function() {
		$('input:checkbox').on("click",function(){
			var day = $(this).attr('id');
			$(this).is(':checked')? $("#"+day+"_hour_4i, #"+day+"_hour_5i").attr('required', 'required') : $("#"+day+"_hour_4i, #"+day+"_hour_5i").removeAttr('required');
		});
		$("#new_course").submit(function(event) {
			$("#loader").fadeIn();
			$("#course_container").fadeOut();
		});
	});
</script>