<% provide(:title, "Nuevo Curso") %>

<div class="boton_der">
	<div class="top_buttons">
		<%= link_factory( :_path => groups_path, :_text => "Regresar a los programas", _class: 'btn btn-info', _button: true ) %>
	</div>
	<h1>Nuevo Curso<span class="line"></span></h1>
</div>

<div id="loader">
	<img src="/assets/calendar_loader.GIF" alt="">
	CREANDO CURSO
</div>
<div class="spacer"></div>
<div class="row" id="course_container">
	<div class="col-md-4 col-md-offset-4">
	  	<%= simple_form_for @course, :html => {:multipart => true, :class => 'form-horizontal'} do |f| %>
	  		<%= render 'shared/error_messages', object: f.object %>
	  		<p><%= f.input :name, label:"Nombre del Grupo" %></p>
	  		<p><%= f.input :user_id, label:"Instructor", include_blank: true, collection: User.instructors.map { |p| [ p.name, p.id ] } %></p>
	  		<p><%= f.input :assistant_id, label:"Asistente", include_blank: true, collection: User.instructors.map { |p| [ p.name, p.id ] } %></p>
			<div id="selector_fecha">
				
			</div>
			<p><%= f.number_field :program_id, value: @program.id, :readonly => true, :class => 'disabled form-control', :type=>"hidden" %></p>
			<p><%= f.input :cost, as: :integer,  label:"Costo" %></p>
			<p><%= f.input :location, label:"Ubicación" %></p>
			<div class="spacer"></div>
			<div class="col-md-12 time_selector">
				<div class="col-md-5"><%= f.label "days", 'Días de clases' %></div>
				<div class="col-md-7 text_center"><%= f.label "days", 'Horas de clase' %></div>
			</div>
			<div class="spacer"></div>
			<% dias = ['Lunes','Martes','Miércoles','Jueves','Viernes'] %>
			<% days_symbols = [:monday, :tuesday, :wednesday, :thursday, :friday] %>
			<% hours = [ :monday_hour, :tuesday_hour, :wednesday_hour, :thursday_hour, :friday_hour ] %>
			<% dias.each_with_index do |day,index| %>
				<div class="col-md-12 time_selector">
					<div class="col-md-5">
						<%= f.check_box days_symbols[index], {}, true, false %>
						<%= f.label days_symbols[index], dias[index] %>
					</div>
					<div class="col-md-7">
						<%= f.input hours[index], as: :time, include_blank: true, :minute_step => 30, :time_separator => "", :start_hour => 7, :end_hour => 21, :input_html=> {:class=>'time_select
							'} %>
					</div>
				</div>
			<% end %>
			<br>
			<p><%= f.submit "Guardar", class: "btn btn-sm btn-primary" %></p>
		<% end %>
	</div>
</div>

<script>
	$(document).ready(function() {
		$('input:checkbox').on("click",function(){
			var day = $(this).attr('id');
			$(this).is(':checked')? $("#"+day+"_hour_4i, #"+day+"_hour_5i").attr('required', 'required') : $("#"+day+"_hour_4i, #"+day+"_hour_5i").removeAttr('required');
		});
		$("#new_course").submit(function(event) {
			$("#loader").fadeIn();
			$("#course_container").fadeOut();
		});
	});
</script>